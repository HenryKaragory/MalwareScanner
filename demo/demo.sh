#!/bin/bash

cd ..

echo "======= COMPILING MALWARESCANNER ======="

echo
make
echo

cd lkm-syscall-v1

echo "======= COMPILING THE KERNEL MODULE ======"

echo
make
echo

cd lkm
echo "======= LOADING THE KERNEL MODULE ======"

echo
sudo rmmod syscall
sudo insmod syscall.ko
echo

cd ..
cd ..

cd test
echo "======= COMPILING THE KERNEL MALWARE ======"

echo
make
echo

echo "======= RUNNING THE MALWARE ======"

echo
./malware &
./not_malware &
echo

cd ..

echo "======= RUNNING THE MALWARE SCANNER ======"
echo

echo "======= MALWARE SCANNER DEMO ======="
echo

while [ "$1" != "" ]; do
    ./malware_finder $1
    shift
done
./malware_finder

echo
echo "======= MALWARE SCANNER DEMO END ======="

